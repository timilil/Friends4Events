<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Profile<img id="logo" width="40px" height="30px" src="assets/imgs/f4elogo.png"></ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding class="background">
  <form class="center" (submit)="uploadProfilePic()">
    <ion-avatar class="profile-avatar">
      <label for="file-input">
        <img src="http://media.mw.metropolia.fi/wbma/uploads/{{profilePicName}}" *ngIf="profilePicName != null">
        <img src="assets/imgs/profilepicture.png" *ngIf="profilePicName == null">
      </label>
      <input id="file-input" type="file" name="file" (change)="changeProfilePicture($event)" style="display: none" accept="image/*"/>
    </ion-avatar>
    <div class="information">
      <h2>Username: {{userName}}</h2>
      <h3>Email: {{userEmail}}</h3>
      <h3>Full name: {{fullName}}</h3>
    </div>
  </form>
  <div class="information2">
    <h2>Username: {{userName}}</h2>
    <h3>Email: {{userEmail}}</h3>
    <h3>Full name: {{fullName}}</h3>
  </div>
  <br>
  <div class="eventsDiv">
    <h2>My events ({{userEvents.length}})</h2>
  </div>
  <ion-list *ngFor="let event of userEvents">
    <ion-card class="flexcard">
      <img class="image" src="http://media.mw.metropolia.fi/wbma/uploads/{{event.filename.split('.')[0]+'-tn320.png'}}" (click)="itemTapped($event, item, event.file_id, event.title, event.description, event.user_id, event.filename, event.time_added)"/>
      <ion-card-content class="cardcontent">
        <ion-card-title>
          {{event.title}}
        </ion-card-title>
        <p class="ellipsis">
          {{event.description}}
        </p>
        <button ion-button class="deleteButton" (click)="deleteEvent($event, event.file_id)">Delete Event</button>
      </ion-card-content>
    </ion-card>
  </ion-list>

  <div class="eventsDiv">
    <h2>My signed up events ({{mySigned.length}})</h2>
  </div>
  <ion-list *ngFor="let event of mySigned">

    <ion-card class="flexcard">
      <img class="image" src="http://media.mw.metropolia.fi/wbma/uploads/{{event.filename.split('.')[0]+'-tn320.png'}}" (click)="itemTapped($event, item, event.file_id, event.title, event.description, event.user_id, event.filename, event.time_added)"/>
      <ion-card-content class="cardcontent">
        <ion-card-title>
          {{event.title}}
        </ion-card-title>
        <p class="ellipsis">
          {{event.description}}
        </p>
      </ion-card-content>
    </ion-card>
  </ion-list>
</ion-content>

<ion-footer>
  <ion-toolbar >
    <div class="box">
      <button ion-button icon-left clear class="box" (click)="redirectToProfilePicUploadPage()">
        <ion-icon name="md-camera"></ion-icon>
      </button>
      <button ion-button icon-middle clear class="box" (click)="redirectToAddEventPage()">
        <ion-icon name="md-add"></ion-icon>
      </button>
      <button ion-button icon-right clear class="box" (click)="redirectToUpdatePage()">
        <ion-icon name="settings"></ion-icon>
      </button>
    </div>
  </ion-toolbar>
</ion-footer>

